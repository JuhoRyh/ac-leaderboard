(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{56:function(e,t,c){},57:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c(1),n=c(26),r=c.n(n),l=c(14),j=c(2),i=c(4),d=c(5),b=c.n(d),o=function(e){var t=Object(s.useState)(),c=Object(i.a)(t,2),n=c[0],r=c[1];Object(s.useEffect)((function(){b.a.get("/api/cars/".concat(e.record.carId)).then((function(e){r(e.data[0])}))}),[]);var l;return void 0!==n?Object(a.jsxs)("div",{className:"w-screen md:w-1/2 flex flex-row justify-between shadow-xl",children:[Object(a.jsxs)("div",{className:"m-auto",children:[Object(a.jsx)("p",{className:"text-xl text-left",children:e.record.username}),Object(a.jsx)("h4",{className:"text-3xl text-left",children:(l=e.record.laptime,Math.floor(l/6e4)+":"+(l%6e4/1e3).toFixed(0)+"."+l%1e3)}),Object(a.jsxs)("p",{children:[n.brand," ",n.name]})]}),Object(a.jsx)("div",{children:Object(a.jsx)("img",{width:"355",src:"/images/cars/".concat(n.carId,".jpg")})})]}):Object(a.jsx)("div",{})},u=function(){var e=Object(j.f)().trackId,t=Object(s.useState)([]),c=Object(i.a)(t,2),n=c[0],r=c[1],l=Object(s.useState)(),d=Object(i.a)(l,2),u=d[0],x=d[1],O=Object(s.useState)(1),h=Object(i.a)(O,2),m=h[0],f=h[1];Object(s.useEffect)((function(){b.a.all([b.a.get("/api/tracks/".concat(e)),b.a.get("/api/records/".concat(e))]).then(b.a.spread((function(e,t){x(e.data[0]),console.log(e.data),r(t.data)})))}),[]);return console.log(m),void 0!==u?Object(a.jsxs)("div",{className:"flex flex-col items-center",children:[Object(a.jsxs)("div",{className:"w-screen md:w-1/2 flex flex-row justify-between border-2",children:[Object(a.jsxs)("div",{className:"m-auto",children:[Object(a.jsx)("h2",{className:"text-3xl text-center",children:u.name}),Object(a.jsx)("p",{className:"text-center",children:u.desc})]}),Object(a.jsx)("img",{width:"355",className:"float-right",src:"/images/tracks/".concat(u.trackId,".png")})]}),Object(a.jsx)("div",{className:"flex",children:u.configuration.map((function(e){return Object(a.jsx)("button",{className:"p-4 bg-blue-300 m-2 rounded-lg hover:bg-blue-500",onClick:function(){return t=e.confId,void f(t);var t},children:e.layout})}))}),n.length>0?n.filter((function(e){return e.confId===m})).map((function(e){return Object(a.jsx)(o,{record:e},e._id)})):Object(a.jsx)("p",{children:"No Records yet"})]}):Object(a.jsx)("div",{})},x=function(e){var t=Object(s.useState)(),c=Object(i.a)(t,2),n=c[0],r=c[1],l=Object(s.useState)(),j=Object(i.a)(l,2),d=j[0],o=j[1],u=Object(s.useState)(),x=Object(i.a)(u,2),O=x[0],h=x[1],m=Object(s.useState)(),f=Object(i.a)(m,2),p=f[0],g=f[1],v=Object(s.useState)(),N=Object(i.a)(v,2),k=N[0],I=N[1],w=Object(s.useState)(),S=Object(i.a)(w,2),y=S[0],C=S[1],E=Object(s.useState)(),M=Object(i.a)(E,2),L=M[0],B=M[1],J=Object(s.useState)(""),A=Object(i.a)(J,2),D=A[0],F=A[1];return Object(a.jsx)("div",{className:"flex flex-col items-center",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=6e4*parseInt(k)+1e3*parseInt(y)+parseInt(L),c={username:D,carId:parseInt(n),trackId:d.trackId,confId:parseInt(O),laptime:t};b.a.post("/api/records",c),C(0),B(0),I(0),F("")},className:"bg-gray-300 p-6 mb-6 rounded-lg",children:[Object(a.jsxs)("div",{className:"grid grid-cols-2",children:[Object(a.jsxs)("label",{children:["Track:",Object(a.jsx)("br",{}),Object(a.jsxs)("select",{className:"w-full mb-4",onChange:function(t){var c=e.tracks.find((function(e){return e.trackId===parseInt(t.target.value)}));o(c)},children:[Object(a.jsx)("option",{}),e.tracks.map((function(e){return Object(a.jsx)("option",{value:e.trackId,children:e.name},e.trackId)}))]})]}),Object(a.jsxs)("label",{children:["Layout:",Object(a.jsx)("br",{}),Object(a.jsxs)("select",{className:"w-full",onChange:function(e){h(e.target.value)},children:[Object(a.jsx)("option",{}),void 0===d||null===d?null:d.configuration.map((function(e){return Object(a.jsx)("option",{value:e.confId,children:e.layout},e.confId)}))]})]})]}),Object(a.jsxs)("div",{className:"grid grid-cols-2",children:[Object(a.jsxs)("label",{children:["Brand:",Object(a.jsx)("br",{}),Object(a.jsxs)("select",{className:"w-full",onChange:function(t){var c=e.cars.filter((function(e){return e.brand==t.target.value}));g(c)},children:[Object(a.jsx)("option",{}),function(e){var t=[];return e.map((function(e){t.includes(e.brand)||t.push(e.brand)})),t}(e.cars).map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}))]})]}),Object(a.jsxs)("label",{children:["Model:",Object(a.jsx)("br",{}),Object(a.jsxs)("select",{className:"w-full mb-4",onChange:function(e){r(e.target.value)},children:[Object(a.jsx)("option",{}),void 0===p||null===p?null:p.map((function(e){return Object(a.jsx)("option",{value:e.carId,children:e.name},e.carId)}))]})]})]}),Object(a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 mb-4 justify-items-between",children:[Object(a.jsx)("div",{className:"m-4",children:Object(a.jsxs)("label",{children:["Minutes:",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",value:k,onChange:function(e){I(e.target.value)}})]})}),Object(a.jsx)("div",{className:"m-4",children:Object(a.jsxs)("label",{children:["Seconds:",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",value:y,onChange:function(e){C(e.target.value)}})]})}),Object(a.jsx)("div",{className:"m-4",children:Object(a.jsxs)("label",{children:["Milliseconds:",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",value:L,onChange:function(e){B(e.target.value)}})]})})]}),Object(a.jsx)("div",{className:"ml-24 mr-24 mb-4",children:Object(a.jsxs)("label",{children:["Username:",Object(a.jsx)("br",{}),Object(a.jsx)("input",{className:"w-full",type:"text",value:D,onChange:function(e){F(e.target.value)}})]})}),Object(a.jsx)("div",{className:"grid grid-cols-1",children:Object(a.jsx)("button",{className:"h-12 px-6 m-2 text-lg text-blue-100 bg-blue-600 rounded-lg hover:bg-blue-700",type:"submit",children:"Submit"})})]})})},O=function(e){return Object(a.jsx)("div",{className:"shadow-lg p-4",children:Object(a.jsx)("a",{href:"/track/".concat(e.track.trackId),children:Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{src:"/images/tracks/".concat(e.track.trackId,".png")}),Object(a.jsx)("h2",{className:"text-2xl",children:e.track.name}),Object(a.jsx)("h4",{className:"text-sm",children:e.track.desc})]})})})},h=function(e){return Object(a.jsxs)("div",{className:"flex flex-col items-center",children:[Object(a.jsx)("h3",{className:"text-5xl",children:"Leaderboards"}),Object(a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3",children:e.tracks.map((function(e){return Object(a.jsx)(O,{track:e},e.trackId)}))})]})},m=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)([]),l=Object(i.a)(r,2),j=l[0],d=l[1];return Object(s.useEffect)((function(){b.a.all([b.a.get("/api/tracks"),b.a.get("/api/cars")]).then(b.a.spread((function(e,t){d(e.data),n(t.data)})))}),[]),j.length>1&&c.length>1?Object(a.jsx)("div",{children:Object(a.jsxs)("div",{children:[Object(a.jsx)(x,{cars:c,tracks:j}),Object(a.jsx)(h,{tracks:j})]})}):Object(a.jsx)("div",{})},f=function(){return Object(a.jsx)("div",{className:"mt-4 mb-4",children:Object(a.jsx)("a",{href:"/",children:Object(a.jsx)("h1",{className:"text-center text-3xl font-bold",children:"AC Hotlap Leaderboards"})})})},p=(c(56),function(){return Object(a.jsx)(l.a,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)(f,{}),Object(a.jsxs)(j.c,{children:[Object(a.jsx)(j.a,{path:"/track/:trackId",children:Object(a.jsx)(u,{})}),Object(a.jsx)(j.a,{path:"/",children:Object(a.jsx)(m,{})})]})]})})});r.a.render(Object(a.jsx)(p,{}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.068a83c7.chunk.js.map